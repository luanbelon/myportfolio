
import React, { createContext, useContext, useState, useEffect } from 'react';

const LanguageContext = createContext();

export const useLanguage = () => {
  const context = useContext(LanguageContext);
  if (!context) {
    throw new Error('useLanguage must be used within a LanguageProvider');
  }
  return context;
};

const translations = {
  pt: {
  // Header
  home: 'In√≠cio',
  skills: 'Habilidades',
  projects: 'Projetos',
  contact: 'Contato',
  testimonials: 'Depoimentos',

  // Hero
  heroTitle: 'Eu sou',
  heroSubtitle: 'Analista de Sistemas & UX Designer',
  heroDescription: 'Especializado em criar experi√™ncias digitais incr√≠veis usando React, Angular, WordPress e ferramentas de design. Transformo ideias em interfaces funcionais e visualmente impactantes.',
  viewProjects: 'Ver Meus Projetos',
  getInTouch: 'Entre em Contato',

  // Skills
  skillsTitle: 'Minhas Habilidades',
  frontendDev: 'Desenvolvimento Front-end',
  designUx: 'Design & UX',
  cmsEcommerce: 'CMS & E-commerce',
  softSkills: 'Soft Skills',
  professionalExperience: 'Experi√™ncia Profissional',

  // Experi√™ncia Profissional (role e description traduz√≠veis)
  exp1_role: 'Analista de Sistemas Front End',
  exp1_desc: 'Cria√ß√£o de pe√ßas gr√°ficas com ferramentas Adobe e manuten√ß√£o de portais WordPress. Desenvolvimento de layouts com HTML, CSS, JavaScript, Angular e NextJS.',
  exp2_role: 'Desenvolvedor Wordpress Freelancer',
  exp2_desc: 'Cria√ß√£o e manuten√ß√£o de portais e E-commerces WordPress.',
  exp3_role: 'Desenvolvedor Wordpress Freelancer',
  exp3_desc: 'Cria√ß√£o de websites e lojas virtuais com WordPress, Elementor e WooCommerce.',
  exp4_role: 'Desenvolvedor Wordpress',
  exp4_desc: 'Desenvolvimento de websites e lojas virtuais. Cria√ß√£o de layouts responsivos usando HTML, CSS, JavaScript, Angular e NextJS.',

  // Projects
  projectsTitle: 'Projetos',
  all: 'Todos',
  Sunbeat: 'Sunbeat Energy',
  SunbeatDesc: 'Landing page para uma empresa que vende servi√ßos de energia.',
  Overall: 'Sunbeat Energy',
  overallDesc: 'P√°gina de destino para una empresa que vende servicios energ√©ticos.',
  analyticsDashboard: 'Dashboard Analytics',
  dashboardDesc: 'Painel administrativo com gr√°ficos interativos e relat√≥rios em tempo real.',
  corporateSite: 'Site Corporativo',
  corporateDesc: 'Website institucional responsivo com CMS personalizado.',
  deliveryApp: 'App de Delivery',
  deliveryDesc: 'Aplica√ß√£o web para delivery de comida com sistema de pedidos.',
  creativePortfolio: 'Portfolio Criativo',
  portfolioDesc: 'Site portfolio para artista com galeria interativa.',
  managementSystem: 'Sistema de Gest√£o',
  managementDesc: 'Plataforma de gest√£o empresarial com m√∫ltiplos m√≥dulos.',
  likedWhat: 'Gostou do que viu? Vamos trabalhar juntos!',

  // Testimonials
  testimonialsTitle: 'Depoimentos',
  testimonial1: 'O excelente trabalho do Luan atendeu √†s minhas expectativas; adorei como ela o projetou e organizou. Continuarei trabalhando com voc√™ para melhorar constantemente o meu site.',
  testimonial2: 'Luan √© uma pessoa muito dedicada, paciente e trabalhadora. Gostamos muito de trabalhar com ele e estamos muito satisfeitos com o resultado dos nossos projetos.',
  testimonial3: 'O Luan √© o melhor! Ele √© um profissional muito talentoso, paciente e dedicado. O resultado final do site que criei para n√≥s √© impressionante; ele seguiu todos os requisitos e fez altera√ß√µes quando solicitado. N√≥s o contrataremos novamente no futuro.',
  testimonial4: 'Adorei trabalhar com o Luan sem d√∫vida que vou voltar a contactar!',
  previousTestimonial: 'Depoimento anterior',
  nextTestimonial: 'Pr√≥ximo depoimento',
  goToTestimonial: 'Ir para depoimento',

  // Contact
  hireMeTitle: 'Contate-me',
  workTogether: 'Vamos trabalhar juntos!',
  contactDescription: 'Estou sempre aberto a novos desafios e oportunidades. Se voc√™ tem um projeto em mente ou quer apenas conversar sobre tecnologia, n√£o hesite em entrar em contato!',
  socialNetworks: 'Minhas Redes Sociais',
  sendMessage: 'Envie uma Mensagem',
  name: 'Nome',
  email: 'Email',
  subject: 'Assunto',
  message: 'Mensagem',
  yourName: 'Seu nome',
  yourEmail: 'seu@email.com',
  messageSubject: 'Assunto da mensagem',
  projectMessage: 'Conte-me sobre seu projeto...',
  sendMessageBtn: 'Enviar Mensagem',
  messageSent: 'Mensagem enviada com sucesso!',
  messageError: 'Erro ao enviar mensagem. Tente novamente.',

  // Footer
  madeWith: 'Feito com',
  by: 'por',
  allRights: 'Todos os direitos reservados.',
  frontendDeveloper: 'Desenvolvedor Front-end',
  uxDesigner: 'UX Designer',
  systemsAnalyst: 'Analista de Sistemas',

  // Accessibility
  accessibility: 'Acessibilidade',
  accessibilityControls: 'Controles de Acessibilidade',
  fontSize: 'Tamanho da Fonte',
  increaseFontSize: 'Aumentar fonte',
  decreaseFontSize: 'Diminuir fonte',
  highContrast: 'Alto Contraste',
  toggleHighContrast: 'Alternar alto contraste',
  reset: 'Redefinir',

  // Toast messages
  linkInDevelopment: 'üöß Link em desenvolvimento!',
  linkDescription: 'Este link ainda n√£o foi implementado‚Äîmas n√£o se preocupe! Voc√™ pode solicit√°-lo no seu pr√≥ximo prompt! üöÄ',
  formInDevelopment: 'üöß Formul√°rio em desenvolvimento!',
  formDescription: 'Esta funcionalidade ainda n√£o foi implementada‚Äîmas n√£o se preocupe! Voc√™ pode solicit√°-la no seu pr√≥ximo prompt! üöÄ',
  featureInDevelopment: 'üöß Funcionalidade em desenvolvimento!',
  featureDescription: 'Esta funcionalidade ainda n√£o foi implementada‚Äîmas n√£o se preocupe! Voc√™ pode solicit√°-la no seu pr√≥ximo prompt! üöÄ'
},
  en: {
    // Header
    home: 'Home',
    skills: 'Skills',
    projects: 'Projects',
    contact: 'Contact',
    testimonials: 'Testimonials',
    
    // Hero
    heroTitle: 'I am',
    heroSubtitle: 'Systems Analyst & UX Designer',
    heroDescription: 'Specialized in creating incredible digital experiences using React, Angular, WordPress and design tools. I transform ideas into functional and visually impactful interfaces.',
    viewProjects: 'View My Projects',
    getInTouch: 'Get In Touch',
    
    // Skills
    skillsTitle: 'My Skills',
    frontendDev: 'Frontend Development',
    designUx: 'Design & UX',
    cmsEcommerce: 'CMS & E-commerce',
    softSkills: 'Soft Skills',
    professionalExperience: 'Professional Experience',
    
    // Projects
    projectsTitle: 'Projects',
    all: 'All',
    Sunbeat: 'Sunbeat Energy',
    SunbeatDesc: 'Landing page for a company that sells energy services.',
    Overall: 'Sunbeat Energy',
    overallDesc: 'P√°gina de destino para una empresa que vende servicios energ√©ticos.',
    analyticsDashboard: 'Analytics Dashboard',
    dashboardDesc: 'Administrative panel with interactive charts and real-time reports.',
    corporateSite: 'Corporate Website',
    corporateDesc: 'Responsive institutional website with custom CMS.',
    deliveryApp: 'Delivery App',
    deliveryDesc: 'Web application for food delivery with ordering system.',
    creativePortfolio: 'Creative Portfolio',
    portfolioDesc: 'Portfolio website for artist with interactive gallery.',
    managementSystem: 'Management System',
    managementDesc: 'Business management platform with multiple modules.',
    likedWhat: 'Liked what you saw? Let\'s work together!',

    // Experi√™ncia Profissional (role e description traduz√≠veis)
    // Experience Translations
    exp1_role: 'Frontend Systems Analyst',
    exp1_desc: 'Created graphic pieces using Adobe tools and maintained WordPress portals. Developed layouts with HTML, CSS, JavaScript, Angular, and NextJS.',
    exp2_role: 'Freelance WordPress Developer',
    exp2_desc: 'Created and maintained WordPress portals and e-commerce websites.',
    exp3_role: 'Freelance WordPress Developer',
    exp3_desc: 'Built websites and online stores using WordPress, Elementor, and WooCommerce.',
    exp4_role: 'WordPress Developer',
    exp4_desc: 'Developed websites and e-commerce stores. Created responsive layouts using HTML, CSS, JavaScript, Angular, and NextJS.',

    // Testimonials
    testimonialsTitle: 'Testimonials',
    testimonial1: 'Luan is a excellent work met my expectations; I loved how she designed and organized it. I will continue to work with you to constantly improve my site.',
    testimonial2: 'Luan is a very dedicated, patient and hard-working person. We really enjoyed working with him and are very pleased with the results of our projects.',
    testimonial3: 'Luan is the best! He is a very talented, patient and dedicated professional. The end result of the website he created for us is impressive; he followed all the requirements and made changes when requested. We will hire him again in the future.',
    testimonial4: 'I loved working with Luan and I will definitely contact him again!',
    previousTestimonial: 'Previous testimonial',
    nextTestimonial: 'Next testimonial',
    goToTestimonial: 'Go to testimonial',
    
    // Contact
    hireMeTitle: 'Contact Me',
    workTogether: 'Let\'s work together!',
    contactDescription: 'I\'m always open to new challenges and opportunities. If you have a project in mind or just want to talk about technology, don\'t hesitate to get in touch!',
    socialNetworks: 'My Social Networks',
    sendMessage: 'Send a Message',
    name: 'Name',
    email: 'Email',
    subject: 'Subject',
    message: 'Message',
    yourName: 'Your name',
    yourEmail: 'your@email.com',
    messageSubject: 'Message subject',
    projectMessage: 'Tell me about your project...',
    sendMessageBtn: 'Send Message',
    messageSent: 'Message sent successfully!',
    messageError: 'Error sending message. Please try again.',
    
    // Footer
    madeWith: 'Made with',
    by: 'by',
    allRights: 'All rights reserved.',
    frontendDeveloper: 'Frontend Developer',
    uxDesigner: 'UX Designer',
    systemsAnalyst: 'Systems Analyst',
    
    // Accessibility
    accessibility: 'Accessibility',
    accessibilityControls: 'Accessibility Controls',
    fontSize: 'Font Size',
    increaseFontSize: 'Increase font size',
    decreaseFontSize: 'Decrease font size',
    highContrast: 'High Contrast',
    toggleHighContrast: 'Toggle high contrast',
    reset: 'Reset',
    
    // Toast messages
    linkInDevelopment: 'üöß Link under development!',
    linkDescription: 'This link hasn\'t been implemented yet‚Äîbut don\'t worry! You can request it in your next prompt! üöÄ',
    formInDevelopment: 'üöß Form under development!',
    formDescription: 'This functionality hasn\'t been implemented yet‚Äîbut don\'t worry! You can request it in your next prompt! üöÄ',
    featureInDevelopment: 'üöß Feature under development!',
    featureDescription: 'This functionality hasn\'t been implemented yet‚Äîbut don\'t worry! You can request it in your next prompt! üöÄ'
  },
  es: {
    // Header
    home: 'Inicio',
    skills: 'Habilidades',
    projects: 'Proyectos',
    contact: 'Contacto',
    testimonials: 'Testimonios',
    
    // Hero
    heroTitle: 'Soy',
    heroSubtitle: 'Analista de Sistemas y Dise√±ador UX',
    heroDescription: 'Especializado en crear experiencias digitales incre√≠bles usando React, Angular, WordPress y herramientas de dise√±o. Transformo ideas en interfaces funcionales y visualmente impactantes.',
    viewProjects: 'Ver Mis Proyectos',
    getInTouch: 'Ponte en Contacto',
    
    // Skills
    skillsTitle: 'Mis Habilidades',
    frontendDev: 'Desarrollo Frontend',
    designUx: 'Dise√±o y UX',
    cmsEcommerce: 'CMS y E-commerce',
    softSkills: 'Habilidades Blandas',
    professionalExperience: 'Experiencia Profesional',
    
    // Projects
    projectsTitle: 'Proyectos',
    all: 'Todos',
    Sunbeat: 'Sunbeat Energy',
    SunbeatDesc: 'P√°gina de destino para una empresa que vende servicios energ√©ticos.',
    Overall: 'Sunbeat Energy',
    overallDesc: 'P√°gina de destino para una empresa que vende servicios energ√©ticos.',
    analyticsDashboard: 'Dashboard de Analytics',
    dashboardDesc: 'Panel administrativo con gr√°ficos interactivos e informes en tiempo real.',
    corporateSite: 'Sitio Corporativo',
    corporateDesc: 'Sitio web institucional responsivo con CMS personalizado.',
    deliveryApp: 'App de Delivery',
    deliveryDesc: 'Aplicaci√≥n web para delivery de comida con sistema de pedidos.',
    creativePortfolio: 'Portfolio Creativo',
    portfolioDesc: 'Sitio web portfolio para artista con galer√≠a interactiva.',
    managementSystem: 'Sistema de Gesti√≥n',
    managementDesc: 'Plataforma de gesti√≥n empresarial con m√∫ltiples m√≥dulos.',
    likedWhat: '¬øTe gust√≥ lo que viste? ¬°Trabajemos juntos!',

    // Experi√™ncia Profissional (role e description traduz√≠veis)
    // Experience Translations
    exp1_role: 'Analista de Sistemas Frontend',
    exp1_desc: 'Creaci√≥n de piezas gr√°ficas con herramientas de Adobe y mantenimiento de portales WordPress. Desarrollo de dise√±os con HTML, CSS, JavaScript, Angular y NextJS.',
    exp2_role: 'Desarrollador WordPress Freelance',
    exp2_desc: 'Creaci√≥n y mantenimiento de portales WordPress y sitios de comercio electr√≥nico.',
    exp3_role: 'Desarrollador WordPress Freelance',
    exp3_desc: 'Creaci√≥n de sitios web y tiendas online utilizando WordPress, Elementor y WooCommerce.',
    exp4_role: 'Desarrollador WordPress',
    exp4_desc: 'Desarrollo de sitios web y tiendas virtuales. Creaci√≥n de dise√±os responsivos con HTML, CSS, JavaScript, Angular y NextJS.',

    
    // Testimonials
    testimonialsTitle: 'Testimonios',
    testimonial1: 'El excelente trabajo de Luan cumpli√≥ con mis expectativas; me encant√≥ c√≥mo lo dise√±√≥ y organiz√≥. Seguir√© trabajando contigo para mejorar constantemente mi sitio.',
    testimonial2: 'Luan es una persona muy dedicada, paciente y trabajadora. Disfrutamos mucho trabajando con √©l y estamos muy satisfechos con los resultados de nuestros proyectos.',
    testimonial3: '¬°Luan es el mejor! Es un profesional muy talentoso, paciente y dedicado. El resultado final del sitio web que cre√≥ para nosotros es impresionante; cumpli√≥ con todos los requisitos e hizo los cambios necesarios. Lo contrataremos de nuevo en el futuro.',
    testimonial4: '¬°Me encant√≥ trabajar con Luan y definitivamente volver√© a contactarlo!',
    previousTestimonial: 'Testimonio anterior',
    nextTestimonial: 'Siguiente testimonio',
    goToTestimonial: 'Ir al testimonio',
    
    // Contact
    hireMeTitle: 'Cont√°ctame',
    workTogether: '¬°Trabajemos juntos!',
    contactDescription: 'Siempre estoy abierto a nuevos desaf√≠os y oportunidades. Si tienes un proyecto en mente o solo quieres hablar sobre tecnolog√≠a, ¬°no dudes en contactarme!',
    socialNetworks: 'Mis Redes Sociales',
    sendMessage: 'Env√≠a un Mensaje',
    name: 'Nombre',
    email: 'Email',
    subject: 'Asunto',
    message: 'Mensaje',
    yourName: 'Tu nombre',
    yourEmail: 'tu@email.com',
    messageSubject: 'Asunto del mensaje',
    projectMessage: 'Cu√©ntame sobre tu proyecto...',
    sendMessageBtn: 'Enviar Mensaje',
    messageSent: '¬°Mensaje enviado con √©xito!',
    messageError: 'Error al enviar mensaje. Int√©ntalo de nuevo.',
    
    // Footer
    madeWith: 'Hecho con',
    by: 'por',
    allRights: 'Todos los derechos reservados.',
    frontendDeveloper: 'Desarrollador Frontend',
    uxDesigner: 'Dise√±ador UX',
    systemsAnalyst: 'Analista de Sistemas',
    
    // Accessibility
    accessibility: 'Accesibilidad',
    accessibilityControls: 'Controles de Accesibilidad',
    fontSize: 'Tama√±o de Fuente',
    increaseFontSize: 'Aumentar fuente',
    decreaseFontSize: 'Disminuir fuente',
    highContrast: 'Alto Contraste',
    toggleHighContrast: 'Alternar alto contraste',
    reset: 'Restablecer',
    
    // Toast messages
    linkInDevelopment: 'üöß ¬°Enlace en desarrollo!',
    linkDescription: 'Este enlace a√∫n no ha sido implementado‚Äî¬°pero no te preocupes! ¬°Puedes solicitarlo en tu pr√≥ximo prompt! üöÄ',
    formInDevelopment: 'üöß ¬°Formulario en desarrollo!',
    formDescription: 'Esta funcionalidad a√∫n no ha sido implementada‚Äî¬°pero no te preocupes! ¬°Puedes solicitarla en tu pr√≥ximo prompt! üöÄ',
    featureInDevelopment: 'üöß ¬°Funcionalidad en desarrollo!',
    featureDescription: 'Esta funcionalidad a√∫n no ha sido implementada‚Äî¬°pero no te preocupes! ¬°Puedes solicitarla en tu pr√≥ximo prompt! üöÄ'
  }
};

// Fun√ß√£o para detectar idioma baseado no IP (simulada)
const detectLanguageFromIP = async () => {
  try {
    // Simula√ß√£o de detec√ß√£o por IP - em produ√ß√£o, voc√™ usaria um servi√ßo real
    const response = await fetch('https://ipapi.co/json/');
    const data = await response.json();
    
    // Pa√≠ses que falam portugu√™s
    const portugueseCountries = ['BR', 'PT', 'AO', 'MZ', 'CV', 'GW', 'ST', 'TL'];
    // Pa√≠ses que falam espanhol
    const spanishCountries = ['ES', 'MX', 'AR', 'CO', 'PE', 'VE', 'CL', 'EC', 'GT', 'CU', 'BO', 'DO', 'HN', 'PY', 'SV', 'NI', 'CR', 'PA', 'UY', 'GQ'];
    
    if (portugueseCountries.includes(data.country_code)) {
      return 'pt';
    } else if (spanishCountries.includes(data.country_code)) {
      return 'es';
    }
    
    return 'en';
  } catch (error) {
    // Fallback para portugu√™s se n√£o conseguir detectar
    return 'pt';
  }
};

export const LanguageProvider = ({ children }) => {
  const [language, setLanguage] = useState('pt');
  const [isLoading, setIsLoading] = useState(true);

  useEffect(() => {
    const initializeLanguage = async () => {
      // Primeiro verifica se h√° idioma salvo no localStorage
      const savedLanguage = localStorage.getItem('portfolio-language');
      
      if (savedLanguage && ['pt', 'en', 'es'].includes(savedLanguage)) {
        setLanguage(savedLanguage);
      } else {
        // Se n√£o h√° idioma salvo, detecta pelo IP
        const detectedLanguage = await detectLanguageFromIP();
        setLanguage(detectedLanguage);
        localStorage.setItem('portfolio-language', detectedLanguage);
      }
      
      setIsLoading(false);
    };

    initializeLanguage();
  }, []);

  const changeLanguage = (newLanguage) => {
    if (['pt', 'en', 'es'].includes(newLanguage)) {
      setLanguage(newLanguage);
      localStorage.setItem('portfolio-language', newLanguage);
    }
  };

  const t = (key) => {
    return translations[language]?.[key] || key;
  };

  const value = {
    language,
    changeLanguage,
    t,
    isLoading
  };

  return (
    <LanguageContext.Provider value={value}>
      {children}
    </LanguageContext.Provider>
  );
};
